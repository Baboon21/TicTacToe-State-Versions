using System;

public class Program
{
    public static void Main()
    {
        int[,] ticTacBoard = new int[3, 3] // definition of 2D array
        {
            {-1, -1, -1},
            {-1, -1, -1}, // Initialisation of box
            {-1, -1, -1}
        };

        int[] P1rCount = new int[3] { 0, 0, 0 }; // if player enters a number, the index for the coordinate goes to the same index here. Then the counter for that number should increase in value up until the number hits 3 where the user wins
        int[] P1cCount = new int[3] { 0, 0, 0 };
        int[] P2rCount = new int[3] { 0, 0, 0 };
        int[] P2cCount = new int[3] { 0, 0, 0 };

        for (int t = 0; t <= 9; t++)
        {
            displayBoard(ticTacBoard);
            Console.WriteLine("Player1");

            // User gives input
            Console.Write("Enter row (0–2): ");
            int rownum = userInput();

            Console.Write("Enter column (0–2): ");
            int colnum = userInput();

            ticTacBoard[rownum, colnum] = 0;
            //Console.Clear();
            displayBoard(ticTacBoard);

            Console.WriteLine("Player2");

            // User gives input
            Console.Write("Enter row (0–2): ");
            int rownum2 = userInput();

            Console.Write("Enter column (0–2): ");
            int colnum2 = userInput();

            ticTacBoard[rownum, colnum] = 1;
            //Console.Clear();
            displayBoard(ticTacBoard);
        }
    }

    public static void displayBoard(int[,] ticTacBoard)
    {
        Console.Clear();
        Console.Write("\n");

        // printing
        for (int r = 0; r <= 2; r++)
        {
            for (int c = 0; c <= 2; c++)
            {
                int boardPos = ticTacBoard[r, c];
                switch (boardPos)
                {
                    case 0:
                        Console.Write("O,");
                        break;
                    case 1:
                        Console.Write("1,");
                        break;
                    default:
                        Console.Write("_,");
                        break;
                }
            }
            Console.Write("\n");
        }
    }

    public static int userInput()
    {
        int r; // moved outside so it is still alive after break. Was inside the variable. I needed to be able to access it at any time at the (current)assigned state

        while (true)
        {
            string? input = Console.ReadLine(); // 'inputR' --> 'input' is shorter & clearer. A change that was made

            if (int.TryParse(input, out r))
            {
                if (r >= 0 && r <= 2) // range validator
                {
                    break;
                }
                else
                {
                    //Console.ForegroundColor = ConsoleColor.Red;
                    Console.WriteLine(" Number must be between 0 and 2. Try again."); // invalid input given by player. The extra tabs are for clarity.
                }
            }
            else
            {
                Console.WriteLine(" That's not a valid number. Try again.");
            }
        } // end while

        return r; // currently a mistake here
    }
}
